<%= render "layouts/components/breadcrumb", profile: true, category: @category ||= nil, task: @task ||= nil %>

<div class="container my-4">
  <div class="container p-3 my-4 bg-white shadow">
    <h1>User Profile</h1>
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <div class="row">
        <div class="col-md my-3">
          <%= f.label :first_name, class: "form-label" %>
          <%= f.text_field :first_name, class: "form-control" %>
          <div class="container p-2 <%= "d-none" if !resource.errors.any? %>">
            <%  resource.errors.full_messages_for(:first_name).each do |msg| %>
              <p class="m-0 text-danger"><%= msg %></p>
            <% end %>
          </div>
        </div>
        <div class="col-md my-3">
          <%= f.label :last_name, class: "form-label" %>
          <%= f.text_field :last_name, class: "form-control" %>
          <div class="container p-2 <%= "d-none" if !resource.errors.any? %>">
            <%  resource.errors.full_messages_for(:last_name).each do |msg| %>
              <p class="m-0 text-danger"><%= msg %></p>
            <% end %>
          </div>
        </div>
        <div class="col-md my-3">
          <%= f.label :username, class: "form-label" %>
          <%= f.text_field :username, class: "form-control" %>
          <div class="container p-2 <%= "d-none" if !resource.errors.any? %>">
            <%  resource.errors.full_messages_for(:username).each do |msg| %>
              <p class="m-0 text-danger"><%= msg %></p>
            <% end %>
          </div>
        </div>
        <div class="col-12 my-3">
          <%= f.label :email, class: "form-label" %>
          <%= f.text_field :email, autofocus:true, autocomplete: "email", class: "form-control" %>
          <div class="container p-2 <%= "d-none" if !resource.errors.any? %>">
            <%  resource.errors.full_messages_for(:email).each do |msg| %>
              <p class="m-0 text-danger"><%= msg %></p>
            <% end %>
          </div>
        </div>
        <div class="col-12 my-3">
          <%= f.label :bio, class: "form-label" %>
          <%= f.text_area :bio, class: "form-control", placeholder: "Tell us something about yourself!" %>
        </div>
      </div>        
      <div class="my-3 d-flex justify-content-between align-items-center">
        <%= link_to "Cancel", profile_path(current_user.username), class: "btn btn-outline-primary" %>
        <div>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#changeModal">
            Password
          </button>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#saveModal">
            Update
          </button>
        </div>
      </div>
      <%= render "modal_change", resource: resource, f: f %>
      <%= render "modal_save", resource: resource, f: f %>
    <% end %>
  </div>

  <div class="container p-3 my-4 bg-white shadow d-flex justify-content-between align-items-center">
    <h3>Delete Account</h3>
    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
      Delete
    </button>
  </div>
  <%= render "modal_delete" %>
</div>


